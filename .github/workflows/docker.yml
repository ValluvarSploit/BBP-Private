name: Docker
on:
  workflow_dispatch:
env:
      DOCKER_PASSWORD: ${{ secrets.DOCKER_PASSWORD }}
      S_TOKEN: ${{ secrets.SLACK_OAUTH_USER_TOKEN }}
      S_URL: https://slack.com/api/files.upload      
jobs:
  Docker:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Docker
        run: |
         git clone https://github.com/ValluvarSploit/GoLinkFinder.git; cd GoLinkFinder;
         docker build -t valluvarsploit/golinkfinder .;
         docker run --rm valluvarsploit/golinkfinder -d github.com > js.txt;
         echo "$DOCKER_PASSWORD" | docker login --username=valluvarsploit --password-stdin;
         docker push valluvarsploit/golinkfinder;
         curl "$S_URL" -F token="$S_TOKEN" -F channels="$S_CHANNEL" -F title=Docker-Test -F file=@js.txt;
         
#         docker run --rm valluvarsploit/golinkfinder -h;
#         docker run --rm -v `pwd`:/golinkfinder/ valluvarsploit/golinkfinder -d allegro.pl -o /golinkfinder/golinkfinder-js-end-urls.txt;
#         
#         docker push valluvarsploit/golinkfinder;
#         docker run --rm -v `pwd`:/linkfinder/output valluvarsploit/linkfinder -i https://allegro.pl -o /linkfinder/output/output.html;
#         echo "$DOCKER_PASSWORD" | docker login --username=valluvarsploit --password-stdin;
#         docker push valluvarsploit/linkfinder;
#         docker run --rm -v `pwd`:/tmp valluvarsploit/subscraper example.pl -o /tmp/subs.subscrap;
#         echo "$DOCKER_PASSWORD" | docker login --username=valluvarsploit --password-stdin;
#         docker push valluvarsploit/subscraper
#         docker pull valluvarsploit/subscraper:latest;
#         wget https://raw.githubusercontent.com/ValluvarSploit/Resolver/main/resolvers.txt;
